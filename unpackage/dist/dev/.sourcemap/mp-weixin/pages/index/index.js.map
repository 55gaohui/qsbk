{"version":3,"sources":["webpack:///D:/studyPro/qsbk/main.js","webpack:///D:/studyPro/qsbk/pages/index/index.vue?a1de","webpack:///D:/studyPro/qsbk/pages/index/index.vue?f1d6","webpack:///D:/studyPro/qsbk/pages/index/index.vue?abae","webpack:///D:/studyPro/qsbk/pages/index/index.vue?4896","webpack:///D:/studyPro/qsbk/pages/index/index.vue"],"names":["createPage","Page","name","components","indexList","swiperTabHead","loadMore","noThing","data","tabIndex","currentIndex","tabBars","newslist","onLoad","getNav","uni","$on","updateData","onNavigationBarSearchInputClicked","navigateTo","url","onNavigationBarButtonTap","e","index","User","navigate","JSON","stringify","methods","type","updateGuanZhu","updateSupport","updateList","updateComment","obj","lists","find","val","id","post_id","console","log","commentnum","findIndex","post_class_id","push","__format","forEach","item","userid","isguanzhu","value","oldindex","infonum","do","dingnum","cainum","$http","get","token","err","res","errorCheck","list","arr","arr2","i","length","classname","loadtext","page","firstload","getList","error","concat","user","userpic","username","fens","title","titlepic","video","path","share","support","ding_count","cai_count","comment_count","sharenum","tabtap","tabChange","detail","current","loadmore"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=313c9113&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('313c9113', component.options)\n    } else {\n      api.reload('313c9113', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=313c9113&\", function () {\n      api.rerender('313c9113', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"studyPro/qsbk/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=313c9113&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport indexList from '../../components/index/index-list.vue'\nimport swiperTabHead from \"../../components/index/swiper-tab-head.vue\"\nimport loadMore from \"../../components/common/load-more.vue\"\nimport noThing from \"../../components/common/no-thing.vue\"\nexport default {\n\tname: \"index\",\n\tcomponents: {\n\t\tindexList,\n\t\tswiperTabHead,\n\t\tloadMore,\n\t\tnoThing\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttabIndex: 0,\n\t\t\tcurrentIndex: 0,\n\t\t\ttabBars: [],\n\t\t\tnewslist: []\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.getNav();\n\t\t// 开启监听\n\t\tuni.$on('updateData',this.updateData);\n\t},\n\t//监听搜索框点击事件\n\tonNavigationBarSearchInputClicked() {\n\t\tuni.navigateTo({\n\t\t\turl: \"../search/search\",\n\t\t})\n\t},\n\tonNavigationBarButtonTap(e) {\n\t\tswitch (e.index) {\n\t\t\tcase 1:\n\t\t\t\tthis.User.navigate({\n\t\t\t\t\turl: '../add-input/add-input?postclass='+JSON.stringify(this.tabBars),\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tmethods: {\n\t\tupdateData(data){\n\t\t\tswitch (data.type){\n\t\t\t\tcase 'guanzhu':\n\t\t\t\tthis.updateGuanZhu(data);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'support':\n\t\t\t\tthis.updateSupport(data);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"updateList\":\n\t\t\t\t\tthis.updateList(data);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"updateComment\":\n\t\t\t\t\tthis.updateComment(data);\n\t\t\t\t\tbreak;\t\t\n\t\t\t}\n\t\t},\n\t\t// 更新评论数\n\t\tupdateComment(data){\n\t\t\t// 拿到当前对象\n\t\t\tlet obj = this.newslist[this.tabIndex].lists.find((val) => {\n\t\t\t\treturn val.id === data.post_id;\n\t\t\t})\n\t\t\tif(!obj) return;\n\t\t\tconsole.log(obj);\n\t\t\tobj.commentnum++;   // 评论数+1\n\t\t},\n\t\t//更新用户发布信息\n\t\tupdateList(data){\n\t\t\t// 第一种，直接追加\n\t\t\t// 获取当前文章属于哪一类\n\t\t\tlet index = this.tabBars.findIndex((val) => {\n\t\t\t\treturn val.id = data.post_class_id;\n\t\t\t})\n\t\t\t// 添加至找的分类\n\t\t\tif (index > -1) {\n\t\t\t\tthis.tabBars[index].lists.push(__format(data));\n\t\t\t}\n\t\t\t// 第二种，重新加载当前post_class_id信息\n\t\t},\n\t\t// 更新关注信息\n\t\tupdateGuanZhu(data){\n\t\t\tthis.newslist[this.tabIndex].lists.forEach((item,index)=>{\n\t\t\t\tif(item.userid == data.userid){\n\t\t\t\t\titem.isguanzhu = data.data;\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t//更新顶踩\n\t\tupdateSupport(data){\n\t\t\t//拿到当前对象\n\t\t\tlet obj = this.newslist[this.tabIndex].lists.find(value =>{\n\t\t\t\treturn value.id == data.post_id;\n\t\t\t});\n\t\t\tif(!obj) return;\n\t\t\tlet oldindex = obj.infonum.index; // 操作前的状态\n\t\t\tobj.infonum.index = (data.do == 'ding') ? 1 : 2; // 操作后的状态\n\t\t\tif(oldindex !== 0){ //之前操作过\n\t\t\t\toldindex == 1 ? obj.infonum.dingnum-- : obj.infonum.cainum--;\n\t\t\t}\n\t\t\tif (obj.infonum.index !== 0) {  // 当前操作\n\t\t\t\tobj.infonum.index == 1 \n\t\t\t\t\t? obj.infonum.dingnum++ : obj.infonum.cainum++;\n\t\t\t}\n\t\t},\n\t\t//获取文章分类\n\t\tasync getNav(){\n\t\t\tlet [err,res] = await this.$http.get('/postclass','',{\n\t\t\t\ttoken: true\n\t\t\t});\n\t\t\tif(!this.$http.errorCheck(err,res)) return;\n\t\t\tlet list = res.data.data.list;\n\t\t\tlet arr = [];\n\t\t\tlet arr2= [];\n\t\t\tfor (let i=0; i < list.length; i++) {\n\t\t\t\tarr.push({\n\t\t\t\t\tid: list[i].id,\n\t\t\t\t\tname: list[i].classname\n\t\t\t\t});\n\t\t\t\tarr2.push({\n\t\t\t\t\tloadtext:\"上拉加载更多\",\n\t\t\t\t\tlists:[],\n\t\t\t\t\tpage:1,\n\t\t\t\t\tfirstload:false\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.tabBars = arr;\n\t\t\tthis.newslist = arr2;\n\t\t\tthis.tabBars.length > 0 && this.getList();\n\t\t},\n\t\t//获取指定列表\n\t\tasync getList(){\n\t\t\tlet currentIndex = this.tabIndex;\n\t\t\tlet url = `/postclass/${this.tabBars[this.tabIndex].id}/post/${this.newslist[this.tabIndex].page}`;\n\t\t\tlet [err,res] = await this.$http.get(url,'',{token:true});\n\t\t\tlet error = this.$http.errorCheck(err,res,()=>{\n\t\t\t\tthis.newslist[currentIndex].loadtext = '上拉加载更多';\n\t\t\t},()=>{\n\t\t\t\tthis.newslist[currentIndex].loadtext = '上拉加载更多';\n\t\t\t});\n\t\t\tif(!error) return;\n\t\t\tlet arr = [];\n\t\t\tlet list = res.data.data.list;\n\t\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\t\tarr.push(this.__format(list[i]));\n\t\t\t}\n\t\t\tthis.newslist[currentIndex].lists = this.newslist[currentIndex].page>1 ? this.newslist[currentIndex].lists.concat(arr) : arr;\n\t\t\tthis.newslist[currentIndex].firstload = true;\n\t\t\tif(list.length<10){\n\t\t\t\tthis.newslist[currentIndex].loadtext = '没有更多数据了';\n\t\t\t}else{\n\t\t\t\tthis.newslist[currentIndex].loadtext = '上拉加载更多';\n\t\t\t}\n\t\t\treturn;\n\t\t},\n\t\t// 格式转化\n\t\t__format(item){\n\t\t\treturn {\n\t\t\t\tuserid:item.user.id,\n\t\t\t\tuserpic:item.user.userpic,\n\t\t\t\tusername:item.user.username,\n\t\t\t\tisguanzhu:!!item.user.fens.length,\n\t\t\t\tid:item.id,\n\t\t\t\ttitle:item.title,\n\t\t\t\ttype:\"img\", // img:图文,video:视频\n\t\t\t\ttitlepic:item.titlepic,\n\t\t\t\tvideo:false,\n\t\t\t\tpath:item.path,\n\t\t\t\tshare:!!item.share,\n\t\t\t\tinfonum:{\n\t\t\t\t\tindex:(item.support.length>0) ? (item.support[0].type+1) : 0,//0:没有操作，1:顶,2:踩；\n\t\t\t\t\tdingnum:item.ding_count,\n\t\t\t\t\tcainum:item.cai_count,\n\t\t\t\t},\n\t\t\t\tcommentnum:item.comment_count,\n\t\t\t\tsharenum:item.sharenum,\n\t\t\t}\n\t\t},\n\t\t//点击事件\n\t\ttabtap(index) {\n\t\t\tthis.tabIndex = index;\n\t\t},\n\t\t//滑动事件\n\t\ttabChange(e) {\n\t\t\tthis.tabIndex = e.detail.current;\n\t\t\tthis.getList();\n\t\t},\n\t\tloadmore(index) {\n\t\t\t//如果当前状态是还在加载中，或没有更多数据，直接返回\n\t\t\tif (this.newslist[index].loadtext != \"上拉加载更多\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//修改状态\n\t\t\tthis.newslist[index].loadtext = \"加载中\";\n\t\t\tthis.newslist[this.tabIndex].page++;\n\t\t\tthis.getList();\n\t\t}\n\t}\n}\n"],"sourceRoot":""}