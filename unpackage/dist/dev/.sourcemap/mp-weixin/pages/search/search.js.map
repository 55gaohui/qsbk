{"version":3,"sources":["webpack:////Users/gaohui/study/qsbk/main.js","webpack:////Users/gaohui/study/qsbk/pages/search/search.vue?dde5","webpack:////Users/gaohui/study/qsbk/pages/search/search.vue?d5b6","webpack:////Users/gaohui/study/qsbk/pages/search/search.vue?d449","webpack:////Users/gaohui/study/qsbk/pages/search/search.vue?90d3","webpack:////Users/gaohui/study/qsbk/pages/search/search.vue"],"names":["createPage","Page","name","components","indexList","loadMore","noThing","topicList","userListCom","data","issearch","loadtext","list","searchtext","page","searchType","onNavigationBarButtonTap","e","index","uni","navigateBack","delta","onNavigationBarSearchInputChanged","text","onNavigationBarSearchInputConfirmed","getlist","computed","getPlaceholder","type","onLoad","$on","updateData","onReachBottom","loadmore","onPullDownRefresh","stopPullDownRefresh","methods","updateGuanZhu","updateSupport","updateComment","obj","find","val","id","post_id","commentnum","forEach","item","userid","isguanzhu","value","oldindex","infonum","do","dingnum","cainum","console","log","showLoading","title","$http","post","keyword","token","err","res","error","errorCheck","hideLoading","arr","i","length","push","__format","lists","concat","user","userpic","username","fens","titlepic","video","path","share","support","ding_count","cai_count","comment_count","sharenum","desc","totalnum","post_count","todaynum","todaypost_count","age","userinfo","sex","goBack"],"mappings":"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","file":"pages/search/search.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=ef86a26e&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('ef86a26e', component.options)\n    } else {\n      api.reload('ef86a26e', component.options)\n    }\n    module.hot.accept(\"./search.vue?vue&type=template&id=ef86a26e&\", function () {\n      api.rerender('ef86a26e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/gaohui/study/qsbk/pages/search/search.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=ef86a26e&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport indexList from \"../../components/index/index-list.vue\"\nimport loadMore from \"../../components/common/load-more.vue\"\nimport noThing from \"../../components/common/no-thing.vue\"\nimport topicList from \"../../components/news/topic-list.vue\"\nimport userListCom from \"../../components/user-list/user-list-com.vue\"\nexport default {\n\tname: \"search\",\n\tcomponents: {\n\t\tindexList,\n\t\tloadMore,\n\t\tnoThing,\n\t\ttopicList,\n\t\tuserListCom,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tissearch: false,\n\t\t\tloadtext: \"上拉加载更多\",\n\t\t\tlist: [],\n\t\t\tsearchtext: '',\n\t\t\tpage: 1,\n\t\t\tsearchType: 'post'\n\t\t}\n\t},\n\t//监听原生标题导航按钮点击事件\n\tonNavigationBarButtonTap(e) {\n\t\tif (e.index == 0) {\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t});\n\t\t}\n\t},\n\t//监听原生输入框 文本发生改变\n\tonNavigationBarSearchInputChanged(e) {\n\t\tthis.searchtext = e.text;\n\t},\n\t//监听 原生键盘内的搜索按钮点击\n\tonNavigationBarSearchInputConfirmed(e) {\n\t\tif (e.text) {\n\t\t\tthis.getlist();\n\t\t}\n\t},\n\tcomputed:{\n\n\t\tgetPlaceholder(){\n\t\t\tlet type = '文章'\n\t\t\tif (this.searchType == 'post') {\n\t\t\t\ttype = '文章';\n\t\t\t}else if(this.searchType == 'topic'){\n\t\t\t\ttype = '话题';\n\t\t\t}else if(this.searchType == 'user'){\n\t\t\t\ttype = '用户';\n\t\t\t}\n\t\t\treturn '搜索'+type;\n\t\t}\n\n\t},\n\tonLoad(e) {\n\t\tif(!e) return;\n\t\tthis.searchType = e.searchType || 'post';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t// 开启监听\n\t\tuni.$on('updateData',this.updateData);\n\t},\n\t//上拉加载\n\tonReachBottom() {\n\t\tthis.loadmore();\n\t},\n\t// 监听下拉刷新\n\tonPullDownRefresh() {\n\t\tthis.getlist();\n\t\tuni.stopPullDownRefresh();\n\n\t},\n\tmethods: {\n\t\tupdateData(data){\n\t\t\tswitch (data.type){\n\t\t\t\tcase \"guanzhu\":\n\t\t\t\tthis.updateGuanZhu(data)\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"support\":\n\t\t\t\tthis.updateSupport(data);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'updateComment':\n\t\t\t\tthis.updateComment(data);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t// 更新评论数\n\t\tupdateComment(data){\n\t\t\t// 拿到当前对象\n\t\t\tlet obj = this.list.find((val) => {\n\t\t\t\treturn val.id === data.post_id;\n\t\t\t})\n\t\t\tif(!obj) return;\n\t\t\tobj.commentnum++;   // 评论数+1\n\t\t},\n\t\t// 更新关注信息\n\t\tupdateGuanZhu(data){\n\t\t\tthis.list.forEach((item,index)=>{\n\t\t\t\tif(item.userid == data.userid){\n\t\t\t\t\titem.isguanzhu = data.data;\n\t\t\t\t} \n\t\t\t})\n\t\t},\n\t\t//更新顶踩\n\t\tupdateSupport(data){\n\t\t\t// 拿到当前对象\n\t\t\tlet obj = this.list.find(value =>{\n\t\t\t\treturn value.id === data.post_id;\n\t\t\t});\n\t\t\tif (!obj) return;\n\t\t\tlet oldindex = obj.infonum.index; // 操作前的状态\n\t\t\tobj.infonum.index = (data.do == 'ding') ? 1 : 2; // 操作后的状态\n\t\t\tif (oldindex !== 0) { //之前操作过\n\t\t\t\toldindex == 1 ? obj.infonum.dingnum-- : obj.infonum.cainum--;\n\t\t\t}\n\t\t\tif (obj.infonum.index !== 0) {  // 当前操作\n\t\t\t\tobj.infonum.index == 1 \n\t\t\t\t\t? obj.infonum.dingnum++ : obj.infonum.cainum++;\n\t\t\t}\n\t\t\tconsole.log('1');\n\t\t},\n\t\t// 搜索事件\n\t\tasync getlist() {\n\t\t\tuni.showLoading({title:'Loading'});\n\t\t\t//请求服务器   this.searchtext\n\t\t\tlet [err,res] = await this.$http.post('/search/'+this.searchType,{\n\t\t\t\tkeyword: this.searchtext,\n\t\t\t\tpage: this.page\n\t\t\t},{token:true});\n\t\t\tlet error = this.$http.errorCheck(err,res,()=>{\n\t\t\t\tuni.hideLoading();\n\t\t\t},()=>{\n\t\t\t\tuni.hideLoading();\n\t\t\t})\n\t\t\tif(!error) return;\n\t\t\tlet arr = [];\n\t\t\tlet list = res.data.data.list;\n\t\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\t\tarr.push(this.__format(list[i]));\n\t\t\t}\n\t\t\tconsole.log(list);\n\t\t\tthis.list = this.page>1 ? this.lists.concat(arr) : arr;\n\t\t\tthis.issearch = true;\n\t\t\tif(list.length<10){\n\t\t\t\tthis.loadtext = '没有更多数据了';\n\t\t\t}else{\n\t\t\t\tthis.loadtext = '上拉加载更多';\n\t\t\t}\n\t\t\tuni.hideLoading();\n\t\t},\n\t\t// 格式转化\n\t\t__format(item){\n\t\t\tswitch (this.searchType){\n\t\t\t\tcase 'post':\n\t\t\t\t\treturn {\n\t\t\t\t\t\tuserid:item.user.id,\n\t\t\t\t\t\tuserpic:item.user.userpic,\n\t\t\t\t\t\tusername:item.user.username,\n\t\t\t\t\t\tisguanzhu:!!item.user.fens.length,\n\t\t\t\t\t\tid:item.id,\n\t\t\t\t\t\ttitle:item.title,\n\t\t\t\t\t\ttype:\"img\", // img:图文,video:视频\n\t\t\t\t\t\ttitlepic:item.titlepic,\n\t\t\t\t\t\tvideo:false,\n\t\t\t\t\t\tpath:item.path,\n\t\t\t\t\t\tshare:!!item.share,\n\t\t\t\t\t\tinfonum:{\n\t\t\t\t\t\t\tindex:(item.support.length>0) ? (item.support[0].type+1) : 0,//0:没有操作，1:顶,2:踩；\n\t\t\t\t\t\t\tdingnum:item.ding_count,\n\t\t\t\t\t\t\tcainum:item.cai_count,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcommentnum:item.comment_count,\n\t\t\t\t\t\tsharenum:item.sharenum,\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'topic':\n\t\t\t\t\treturn{\n\t\t\t\t\t\tid:item.id,\n\t\t\t\t\t\ttitlepic:item.titlepic,\n\t\t\t\t\t\ttitle:item.title,\n\t\t\t\t\t\tdesc:item.desc,\n\t\t\t\t\t\ttotalnum:item.post_count,\n\t\t\t\t\t\ttodaynum:item.todaypost_count,\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user':\n\t\t\t\t\treturn{\n\t\t\t\t\t\tid:item.id,\n\t\t\t\t\t\tuserpic:item.userpic,\n\t\t\t\t\t\tusername:item.username,\n\t\t\t\t\t\tage:item.userinfo.age,\n\t\t\t\t\t\tsex:item.userinfo.sex,\n\t\t\t\t\t\tisguanzhu:false,\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tloadmore() {\n\t\t\t//如果当前状态是还在加载中，或没有更多数据，直接返回\n\t\t\tif (this.loadtext != \"上拉加载更多\") return;\n\t\t\t//修改状态\n\t\t\tthis.loadtext = \"加载中\";\n\t\t\tthis.page++;\n\t\t\tthis.getlist();\n\t\t\t\n\t\t},\n\n\t\tgoBack(){\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t});\n\t\t}\n\n\t\t\n\t}\n}\n"],"sourceRoot":""}